var _0x15c412=_0x3d04;(function(_0xda2f64,_0x53b117){var _0x4857e7=_0x3d04,_0x101c66=_0xda2f64();while(!![]){try{var _0xb8ffed=-parseInt(_0x4857e7(0x222))/0x1*(parseInt(_0x4857e7(0x219))/0x2)+-parseInt(_0x4857e7(0x1c4))/0x3+-parseInt(_0x4857e7(0x1fc))/0x4*(-parseInt(_0x4857e7(0x1f4))/0x5)+-parseInt(_0x4857e7(0x1e5))/0x6*(-parseInt(_0x4857e7(0x1dc))/0x7)+parseInt(_0x4857e7(0x1e3))/0x8*(parseInt(_0x4857e7(0x211))/0x9)+-parseInt(_0x4857e7(0x21b))/0xa*(-parseInt(_0x4857e7(0x1fd))/0xb)+-parseInt(_0x4857e7(0x20a))/0xc;if(_0xb8ffed===_0x53b117)break;else _0x101c66['push'](_0x101c66['shift']());}catch(_0x301ebb){_0x101c66['push'](_0x101c66['shift']());}}}(_0x3fa9,0x80e78));var _0x4cd77d=(function(){var _0x2491c9=!![];return function(_0x109193,_0x3f5785){var _0x293239=_0x2491c9?function(){var _0x3b3b18=_0x3d04;if(_0x3f5785){var _0x48a97b=_0x3f5785[_0x3b3b18(0x1c7)](_0x109193,arguments);return _0x3f5785=null,_0x48a97b;}}:function(){};return _0x2491c9=![],_0x293239;};}()),_0x1ffa9d=_0x4cd77d(this,function(){var _0x4d3231=_0x3d04;return _0x1ffa9d[_0x4d3231(0x1e8)]()[_0x4d3231(0x1f6)](_0x4d3231(0x1d0))['toString']()[_0x4d3231(0x200)](_0x1ffa9d)['search'](_0x4d3231(0x1d0));});_0x1ffa9d();var _0x1c33a2=(function(){var _0x1ac8fb=!![];return function(_0x467c96,_0x4cbe64){var _0x519454=_0x1ac8fb?function(){var _0x28481f=_0x3d04;if(_0x4cbe64){var _0x291b42=_0x4cbe64[_0x28481f(0x1c7)](_0x467c96,arguments);return _0x4cbe64=null,_0x291b42;}}:function(){};return _0x1ac8fb=![],_0x519454;};}()),_0x4e2e9a=_0x1c33a2(this,function(){var _0x248d57=_0x3d04,_0x4e2b6e;try{var _0x4b3e13=Function(_0x248d57(0x217)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4e2b6e=_0x4b3e13();}catch(_0x127632){_0x4e2b6e=window;}var _0x116e9e=_0x4e2b6e['console']=_0x4e2b6e[_0x248d57(0x1b7)]||{},_0x338387=[_0x248d57(0x20e),'warn',_0x248d57(0x1d8),_0x248d57(0x1cd),'exception',_0x248d57(0x206),_0x248d57(0x210)];for(var _0x59a23d=0x0;_0x59a23d<_0x338387[_0x248d57(0x21c)];_0x59a23d++){var _0x44774f=_0x1c33a2['constructor'][_0x248d57(0x1da)][_0x248d57(0x1eb)](_0x1c33a2),_0x5389f9=_0x338387[_0x59a23d],_0x1efba4=_0x116e9e[_0x5389f9]||_0x44774f;_0x44774f[_0x248d57(0x214)]=_0x1c33a2[_0x248d57(0x1eb)](_0x1c33a2),_0x44774f['toString']=_0x1efba4['toString'][_0x248d57(0x1eb)](_0x1efba4),_0x116e9e[_0x5389f9]=_0x44774f;}});_0x4e2e9a();function _0x3fa9(){var _0x1fc632=['Serv00保活通知\x0a\x0a❌\x20','nezha','1776CpINjR','1008282RPzZWn','\x20-\x20All\x20services\x20restarted\x20successfully.','\x20-\x20Failed\x20to\x20get\x20process\x20list:\x20','constructor','text/plain;\x20charset=utf-8','\x20-\x20Running\x20restart\x20script\x20for\x20all\x20services.','部分服务启动失败，请手动检查！','\x20&&\x20bash\x20','trim','table','dotenv','startsWith','✅\x20Serv00自动保活服务已启动\x0a\x0a账户:\x20','9746232Gtmbao','stopped','kill\x20-9\x20','\x20-\x20Failed\x20to\x20send\x20Telegram\x20message:\x20','log','unlinkSync','trace','7096338MLRyVQ','writeHead','TELEGRAM_CHAT_ID','__proto__','服务启动脚本执行失败。','\x20-\x20Failed\x20to\x20run\x20restart\x20script:\x20','return\x20(function()\x20','post','98nBUGgQ','export\x20','90fiblfi','length','filter','\x20-\x20Failed\x20to\x20check\x20process:\x20','userInfo','name','NEZHA_SERVER','12327NoKESH','partial','HTTP\x20server\x20running\x20on\x20port\x20','/sendMessage','env','stringify','所有服务已成功启动！','console','\x20-\x20Stopped\x20process\x20with\x20PID:\x20','\x20failed\x20to\x20restart.','end','listen','writeFileSync','axios','NEZHA_KEY','child_process','\x20-\x20','/2.sh','config','https://00.2go.us.kg/2.sh','2933322MlQplv','\x20-\x20Nezha\x20服务已启用。','.env','apply','map','statusCode','Content-Type','success','split','error','includes','running','(((.+)+)+)+$','部分服务停止失败，请手动检查！','createServer','Serv00保活通知\x0a\x0a✅\x20所有服务已启动!\x0a账户:\x20','\x0a服务器:\x20','/stop','ps\x20aux','toISOString','info','/start','prototype','inherit','119cWgnLd','push','http','\x20-\x20Starting\x20monitoring\x20services.','setHeader','❌\x20重启脚本执行失败\x0a\x0a账户:\x20','\x20&&\x20','8NyVFMY','NEZHA_PORT','361074QlAkeT','所有服务都正在运行','message','toString','test','\x20is\x20not\x20running.','bind','match','join','data','✅\x20所有服务已成功重启!\x0a\x0a账户:\x20','utf8','Not\x20Found','url','application/json;\x20charset=utf-8','3215LPDOFh','\x20-\x20Telegram\x20credentials\x20not\x20configured.','search','\x20服务重启失败\x0a账户:\x20','warn','/list'];_0x3fa9=function(){return _0x1fc632;};return _0x3fa9();}var http=require(_0x15c412(0x1de)),{execSync}=require(_0x15c412(0x1bf)),axios=require(_0x15c412(0x1bd)),fs=require('fs'),os=require('os');require(_0x15c412(0x207))[_0x15c412(0x1c2)]();var TELEGRAM_CHAT_ID=process[_0x15c412(0x1b4)][_0x15c412(0x213)],TELEGRAM_BOT_TOKEN=process[_0x15c412(0x1b4)]['TELEGRAM_BOT_TOKEN'],HOSTNAME=os['hostname'](),USERNAME=os[_0x15c412(0x21f)]()['username'],RESTART_SCRIPT_URL=_0x15c412(0x1c3),SCRIPT_PATH=os['homedir']()+_0x15c412(0x1c1),services=[{'name':'hy2','match':'server\x20config.yaml'}];process[_0x15c412(0x1b4)][_0x15c412(0x221)]&&process[_0x15c412(0x1b4)][_0x15c412(0x1e4)]&&process[_0x15c412(0x1b4)][_0x15c412(0x1be)]?(services[_0x15c412(0x1dd)]({'name':_0x15c412(0x1fb),'match':/-s .+:\d+ -p .+/}),console[_0x15c412(0x20e)](new Date()[_0x15c412(0x1d7)]()+_0x15c412(0x1c5))):console[_0x15c412(0x20e)](new Date()[_0x15c412(0x1d7)]()+'\x20-\x20Nezha\x20服务未启用，缺少\x20NEZHA_SERVER、NEZHA_PORT\x20或\x20NEZHA_KEY\x20环境变量。');function _0x3d04(_0x585c63,_0x263ffc){var _0x13ed94=_0x3fa9();return _0x3d04=function(_0x4e2e9a,_0x1c33a2){_0x4e2e9a=_0x4e2e9a-0x1b1;var _0x17a114=_0x13ed94[_0x4e2e9a];return _0x17a114;},_0x3d04(_0x585c63,_0x263ffc);}function isProcessRunning(_0x533a25){var _0x55773b=_0x15c412;try{var _0x26250e=execSync('ps\x20aux')['toString']();if(typeof _0x533a25==='string')return _0x26250e['includes'](_0x533a25);else{if(_0x533a25 instanceof RegExp)return _0x533a25[_0x55773b(0x1e9)](_0x26250e);}return![];}catch(_0x124b3c){return console[_0x55773b(0x1cd)](new Date()[_0x55773b(0x1d7)]()+_0x55773b(0x21e)+_0x124b3c[_0x55773b(0x1e7)]),![];}}async function downloadAndRunRestartScript(){var _0x62b59a=_0x15c412;try{var _0x4fa907=await axios['get'](RESTART_SCRIPT_URL);fs[_0x62b59a(0x1bc)](SCRIPT_PATH,_0x4fa907[_0x62b59a(0x1ee)],{'mode':0x1ed});var _0x308ed7=fs['readFileSync'](_0x62b59a(0x1c6),_0x62b59a(0x1f0)),_0x25f21e=_0x308ed7[_0x62b59a(0x1cc)]('\x0a')[_0x62b59a(0x21d)](function(_0x5d66d0){var _0x16d893=_0x62b59a;return _0x5d66d0[_0x16d893(0x205)]()!==''&&!_0x5d66d0[_0x16d893(0x208)]('#');})[_0x62b59a(0x1c8)](function(_0x516d98){var _0x12dc4c=_0x62b59a;return _0x12dc4c(0x21a)+_0x516d98;})[_0x62b59a(0x1ed)](_0x62b59a(0x1e2));return console[_0x62b59a(0x20e)](new Date()['toISOString']()+_0x62b59a(0x202)),execSync(_0x25f21e+_0x62b59a(0x204)+SCRIPT_PATH,{'stdio':_0x62b59a(0x1db)}),fs[_0x62b59a(0x20f)](SCRIPT_PATH),!![];}catch(_0x5f4197){return console[_0x62b59a(0x1cd)](new Date()[_0x62b59a(0x1d7)]()+_0x62b59a(0x216)+_0x5f4197[_0x62b59a(0x1e7)]),await sendTelegramMessage(_0x62b59a(0x1e1)+USERNAME+'\x0a服务器:\x20'+HOSTNAME+'\x0a错误详情:\x20'+_0x5f4197[_0x62b59a(0x1e7)]),![];}}async function sendTelegramMessage(_0x1f6fb5){var _0x29255b=_0x15c412;if(!TELEGRAM_CHAT_ID||!TELEGRAM_BOT_TOKEN){console[_0x29255b(0x1f8)](new Date()[_0x29255b(0x1d7)]()+_0x29255b(0x1f5));return;}try{await axios[_0x29255b(0x218)]('https://api.telegram.org/bot'+TELEGRAM_BOT_TOKEN+_0x29255b(0x1b3),{'chat_id':TELEGRAM_CHAT_ID,'text':_0x1f6fb5});}catch(_0xe7b657){console[_0x29255b(0x1cd)](new Date()['toISOString']()+_0x29255b(0x20d)+_0xe7b657[_0x29255b(0x1e7)]);}}async function monitorServices(){var _0x220622=_0x15c412,_0x5be304=!![];for(var _0x30e83d of services){if(!isProcessRunning(_0x30e83d['match'])){console[_0x220622(0x20e)](new Date()[_0x220622(0x1d7)]()+_0x220622(0x1c0)+_0x30e83d[_0x220622(0x220)]+_0x220622(0x1ea)),await sendTelegramMessage('⚠️\x20'+_0x30e83d[_0x220622(0x220)]+'\x20服务离线\x0a\x0a账户:\x20'+USERNAME+_0x220622(0x1d4)+HOSTNAME+'\x0a\x0a尝试重新启动服务...'),_0x5be304=![];break;}}if(!_0x5be304){var _0x501684=await downloadAndRunRestartScript();if(_0x501684){await new Promise(_0x4d1e16=>setTimeout(_0x4d1e16,0x4e20)),await sendTelegramMessage('Serv00保活通知\x0a\x0a✅\x20所有服务已成功重启!\x0a账户:\x20'+USERNAME+_0x220622(0x1d4)+HOSTNAME+'\x0a');var _0x3ed52c=!![];for(var _0x30e83d of services){!isProcessRunning(_0x30e83d[_0x220622(0x1ec)])&&(_0x3ed52c=![],console[_0x220622(0x20e)](new Date()[_0x220622(0x1d7)]()+_0x220622(0x1c0)+_0x30e83d[_0x220622(0x220)]+_0x220622(0x1b9)),await sendTelegramMessage(_0x220622(0x1fa)+_0x30e83d[_0x220622(0x220)]+_0x220622(0x1f7)+USERNAME+'\x0a服务器:\x20'+HOSTNAME+'\x0a\x0a请检查账号是否已被封锁'));}_0x3ed52c&&(console[_0x220622(0x20e)](new Date()[_0x220622(0x1d7)]()+_0x220622(0x1fe)),await sendTelegramMessage(_0x220622(0x1ef)+USERNAME+'\x0a服务器:\x20'+HOSTNAME+'\x0a'));}}}var monitorInterval=null;function startMonitoring(){var _0x4b49fe=_0x15c412;!monitorInterval&&(console[_0x4b49fe(0x20e)](new Date()[_0x4b49fe(0x1d7)]()+_0x4b49fe(0x1df)),monitorInterval=setInterval(monitorServices,0x1d4c0));}function stopMonitoring(){var _0x47f353=_0x15c412;monitorInterval&&(console[_0x47f353(0x20e)](new Date()[_0x47f353(0x1d7)]()+'\x20-\x20Stopping\x20monitoring\x20services.'),clearInterval(monitorInterval),monitorInterval=null);}function getProcessList(){var _0x422c21=_0x15c412;try{var _0x34091b=execSync(_0x422c21(0x1d6))[_0x422c21(0x1e8)]();return _0x34091b;}catch(_0x20ba82){return console[_0x422c21(0x1cd)](new Date()[_0x422c21(0x1d7)]()+_0x422c21(0x1ff)+_0x20ba82[_0x422c21(0x1e7)]),null;}}function stopProcess(_0x2bf527){var _0x1e9225=_0x15c412;try{var _0x3503b1=execSync(_0x1e9225(0x1d6))[_0x1e9225(0x1e8)](),_0x1c75aa=_0x3503b1[_0x1e9225(0x1cc)]('\x0a');for(var _0x21861a of _0x1c75aa){if(_0x21861a[_0x1e9225(0x1ce)](_0x2bf527)){var _0x1c5a97=_0x21861a[_0x1e9225(0x205)]()[_0x1e9225(0x1cc)](/\s+/)[0x1];execSync(_0x1e9225(0x20c)+_0x1c5a97),console[_0x1e9225(0x20e)](new Date()['toISOString']()+_0x1e9225(0x1b8)+_0x1c5a97);}}return!![];}catch(_0x4d066e){return console[_0x1e9225(0x1cd)](new Date()[_0x1e9225(0x1d7)]()+'\x20-\x20Failed\x20to\x20stop\x20process:\x20'+_0x4d066e[_0x1e9225(0x1e7)]),![];}}var server=http[_0x15c412(0x1d2)](async function(_0x3b9058,_0x5b9e5e){var _0x32d720=_0x15c412;if(_0x3b9058[_0x32d720(0x1f2)]==='/')_0x5b9e5e[_0x32d720(0x212)](0xc8,{'Content-Type':'text/plain;\x20charset=utf-8'}),_0x5b9e5e[_0x32d720(0x1ba)]('Hello\x20world!\x0a');else{if(_0x3b9058[_0x32d720(0x1f2)]===_0x32d720(0x1d9)){_0x5b9e5e[_0x32d720(0x1e0)](_0x32d720(0x1ca),_0x32d720(0x1f3));var _0x21e286=!![];for(var _0x4c015a of services){if(!isProcessRunning(_0x4c015a['match'])){_0x21e286=![];break;}}if(_0x21e286)_0x5b9e5e[_0x32d720(0x1ba)](JSON[_0x32d720(0x1b5)]({'status':_0x32d720(0x1cf),'message':_0x32d720(0x1e6)},null,0x2)),sendTelegramMessage(_0x32d720(0x209)+USERNAME+_0x32d720(0x1d4)+HOSTNAME);else{var _0x1a31ee=await downloadAndRunRestartScript();startMonitoring();if(_0x1a31ee){await new Promise(_0x5cb9f0=>setTimeout(_0x5cb9f0,0x4e20));var _0xd20ff0=!![];for(var _0x4c015a of services){if(!isProcessRunning(_0x4c015a['match'])){_0xd20ff0=![];break;}}_0xd20ff0?(startMonitoring(),_0x5b9e5e[_0x32d720(0x1ba)](JSON[_0x32d720(0x1b5)]({'status':_0x32d720(0x1cb),'message':_0x32d720(0x1b6)},null,0x2)),await sendTelegramMessage(_0x32d720(0x1d3)+USERNAME+_0x32d720(0x1d4)+HOSTNAME+'\x0a')):(startMonitoring(),_0x5b9e5e[_0x32d720(0x1ba)](JSON[_0x32d720(0x1b5)]({'status':_0x32d720(0x1b1),'message':_0x32d720(0x203)},null,0x2)));}else startMonitoring(),_0x5b9e5e[_0x32d720(0x1ba)](JSON[_0x32d720(0x1b5)]({'status':_0x32d720(0x1cd),'message':_0x32d720(0x215)},null,0x2));}}else{if(_0x3b9058[_0x32d720(0x1f2)]===_0x32d720(0x1d5)){_0x5b9e5e[_0x32d720(0x1e0)](_0x32d720(0x1ca),'application/json;\x20charset=utf-8');var _0x1a31ee=!![];for(var _0x4c015a of services){if(!stopProcess(_0x4c015a[_0x32d720(0x1ec)])){_0x1a31ee=![];break;}}_0x1a31ee?(stopMonitoring(),_0x5b9e5e[_0x32d720(0x1ba)](JSON['stringify']({'status':'success','message':'所有服务已成功停止！'},null,0x2))):_0x5b9e5e[_0x32d720(0x1ba)](JSON[_0x32d720(0x1b5)]({'status':_0x32d720(0x1cd),'message':_0x32d720(0x1d1)},null,0x2));}else{if(_0x3b9058[_0x32d720(0x1f2)]==='/status'){_0x5b9e5e[_0x32d720(0x1e0)](_0x32d720(0x1ca),_0x32d720(0x1f3));var _0x2b8e6c=services[_0x32d720(0x1c8)](function(_0x5073d9){var _0x4dcfd8=_0x32d720;return{'name':_0x5073d9['name'],'status':isProcessRunning(_0x5073d9['match'])?'running':_0x4dcfd8(0x20b)};});_0x5b9e5e[_0x32d720(0x1ba)](JSON['stringify']({'monitoring':monitorInterval?_0x32d720(0x1cf):_0x32d720(0x20b),'services':_0x2b8e6c},null,0x2));}else{if(_0x3b9058['url']===_0x32d720(0x1f9)){_0x5b9e5e[_0x32d720(0x1e0)](_0x32d720(0x1ca),'text/plain;\x20charset=utf-8');var _0xb07d6d=getProcessList();_0xb07d6d?_0x5b9e5e[_0x32d720(0x1ba)](_0xb07d6d):_0x5b9e5e['end']('Failed\x20to\x20get\x20process\x20list.');}else _0x5b9e5e[_0x32d720(0x1c9)]=0x194,_0x5b9e5e['setHeader'](_0x32d720(0x1ca),_0x32d720(0x201)),_0x5b9e5e[_0x32d720(0x1ba)](_0x32d720(0x1f1));}}}}}),PORT=0xbb8;server[_0x15c412(0x1bb)](PORT,function(){var _0x4b93b9=_0x15c412;console[_0x4b93b9(0x20e)](_0x4b93b9(0x1b2)+PORT),startMonitoring(),sendTelegramMessage(_0x4b93b9(0x209)+USERNAME+_0x4b93b9(0x1d4)+HOSTNAME);});